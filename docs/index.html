<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>浏览器指纹获取工具</title>
</head>
<body>

    <script>
        // 加载 FingerprintJS
        async function loadFingerprintJS() {
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@5/dist/fp.js';
            
            return new Promise((resolve, reject) => {
                script.onload = () => {
                    if (window.FingerprintJS) {
                        resolve(window.FingerprintJS.load());
                    } else {
                        reject(new Error('FingerprintJS 未正确加载'));
                    }
                };
                script.onerror = () => reject(new Error('FingerprintJS 脚本加载失败'));
                document.head.appendChild(script);
            });
        }
        
        // 生成浏览器指纹
        async function getFingerprint() {
            try {
                const fp = await loadFingerprintJS();
                const result = await fp.get();
                
                // 将完整结果暴露到全局变量
                window.fingerprintResult = result;
                
                // 指纹生成成功后创建结果元素
                const resultDiv = document.createElement('div');
                resultDiv.id = 'fingerprint-result';
                resultDiv.textContent = result.visitorId;
                document.body.appendChild(resultDiv);
                
                console.log('Fingerprint:', result.visitorId);
                
            } catch (error) {
                console.error('Error:', error);
                
                // 创建错误元素
                const errorDiv = document.createElement('div');
                errorDiv.id = 'fingerprint-error';
                errorDiv.textContent = error.message;
                document.body.appendChild(errorDiv);
            }
        }
        
        // 页面加载时自动生成指纹
        window.addEventListener('load', getFingerprint);
    </script>
</body>
</html>